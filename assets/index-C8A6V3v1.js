var Lt=Object.defineProperty;var Bt=(s,e,t)=>e in s?Lt(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var T=(s,e,t)=>Bt(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pt(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var wt={exports:{}};(function(s,e){(function(t,n){s.exports=n()})(Tt,function(){var t="month",n="quarter";return function(r,i){var a=i.prototype;a.quarter=function(f){return this.$utils().u(f)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(f-1))};var o=a.add;a.add=function(f,w){return f=Number(f),this.$utils().p(w)===n?this.add(3*f,t):o.bind(this)(f,w)};var l=a.startOf;a.startOf=function(f,w){var P=this.$utils(),B=!!P.u(w)||w;if(P.p(f)===n){var I=this.quarter()-1;return B?this.month(3*I).startOf(t).startOf("day"):this.month(3*I+2).endOf(t).endOf("day")}return l.bind(this)(f,w)}}})})(wt);var zt=wt.exports;const Gt=pt(zt);var Et={exports:{}};(function(s,e){(function(t,n){s.exports=n()})(Tt,function(){var t=1e3,n=6e4,r=36e5,i="millisecond",a="second",o="minute",l="hour",f="day",w="week",P="month",B="quarter",I="year",j="date",ze="Invalid Date",Ut=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ft=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Yt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(m){var u=["th","st","nd","rd"],c=m%100;return"["+m+(u[(c-20)%10]||u[c]||u[0])+"]"}},Pe=function(m,u,c){var h=String(m);return!h||h.length>=u?m:""+Array(u+1-h.length).join(c)+m},Wt={s:Pe,z:function(m){var u=-m.utcOffset(),c=Math.abs(u),h=Math.floor(c/60),d=c%60;return(u<=0?"+":"-")+Pe(h,2,"0")+":"+Pe(d,2,"0")},m:function m(u,c){if(u.date()<c.date())return-m(c,u);var h=12*(c.year()-u.year())+(c.month()-u.month()),d=u.clone().add(h,P),g=c-d<0,y=u.clone().add(h+(g?-1:1),P);return+(-(h+(c-d)/(g?d-y:y-d))||0)},a:function(m){return m<0?Math.ceil(m)||0:Math.floor(m)},p:function(m){return{M:P,y:I,w,d:f,D:j,h:l,m:o,s:a,ms:i,Q:B}[m]||String(m||"").toLowerCase().replace(/s$/,"")},u:function(m){return m===void 0}},se="en",z={};z[se]=Yt;var Ge="$isDayjsObject",Oe=function(m){return m instanceof ue||!(!m||!m[Ge])},de=function m(u,c,h){var d;if(!u)return se;if(typeof u=="string"){var g=u.toLowerCase();z[g]&&(d=g),c&&(z[g]=c,d=g);var y=u.split("-");if(!d&&y.length>1)return m(y[0])}else{var A=u.name;z[A]=u,d=A}return!h&&d&&(se=d),d||!h&&se},S=function(m,u){if(Oe(m))return m.clone();var c=typeof u=="object"?u:{};return c.date=m,c.args=arguments,new ue(c)},E=Wt;E.l=de,E.i=Oe,E.w=function(m,u){return S(m,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var ue=function(){function m(c){this.$L=de(c.locale,null,!0),this.parse(c),this.$x=this.$x||c.x||{},this[Ge]=!0}var u=m.prototype;return u.parse=function(c){this.$d=function(h){var d=h.date,g=h.utc;if(d===null)return new Date(NaN);if(E.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var y=d.match(Ut);if(y){var A=y[2]-1||0,$=(y[7]||"0").substring(0,3);return g?new Date(Date.UTC(y[1],A,y[3]||1,y[4]||0,y[5]||0,y[6]||0,$)):new Date(y[1],A,y[3]||1,y[4]||0,y[5]||0,y[6]||0,$)}}return new Date(d)}(c),this.init()},u.init=function(){var c=this.$d;this.$y=c.getFullYear(),this.$M=c.getMonth(),this.$D=c.getDate(),this.$W=c.getDay(),this.$H=c.getHours(),this.$m=c.getMinutes(),this.$s=c.getSeconds(),this.$ms=c.getMilliseconds()},u.$utils=function(){return E},u.isValid=function(){return this.$d.toString()!==ze},u.isSame=function(c,h){var d=S(c);return this.startOf(h)<=d&&d<=this.endOf(h)},u.isAfter=function(c,h){return S(c)<this.startOf(h)},u.isBefore=function(c,h){return this.endOf(h)<S(c)},u.$g=function(c,h,d){return E.u(c)?this[h]:this.set(d,c)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(c,h){var d=this,g=!!E.u(h)||h,y=E.p(c),A=function(H,R){var F=E.w(d.$u?Date.UTC(d.$y,R,H):new Date(d.$y,R,H),d);return g?F:F.endOf(f)},$=function(H,R){return E.w(d.toDate()[H].apply(d.toDate("s"),(g?[0,0,0,0]:[23,59,59,999]).slice(R)),d)},x=this.$W,N=this.$M,C=this.$D,V="set"+(this.$u?"UTC":"");switch(y){case I:return g?A(1,0):A(31,11);case P:return g?A(1,N):A(0,N+1);case w:var G=this.$locale().weekStart||0,re=(x<G?x+7:x)-G;return A(g?C-re:C+(6-re),N);case f:case j:return $(V+"Hours",0);case l:return $(V+"Minutes",1);case o:return $(V+"Seconds",2);case a:return $(V+"Milliseconds",3);default:return this.clone()}},u.endOf=function(c){return this.startOf(c,!1)},u.$set=function(c,h){var d,g=E.p(c),y="set"+(this.$u?"UTC":""),A=(d={},d[f]=y+"Date",d[j]=y+"Date",d[P]=y+"Month",d[I]=y+"FullYear",d[l]=y+"Hours",d[o]=y+"Minutes",d[a]=y+"Seconds",d[i]=y+"Milliseconds",d)[g],$=g===f?this.$D+(h-this.$W):h;if(g===P||g===I){var x=this.clone().set(j,1);x.$d[A]($),x.init(),this.$d=x.set(j,Math.min(this.$D,x.daysInMonth())).$d}else A&&this.$d[A]($);return this.init(),this},u.set=function(c,h){return this.clone().$set(c,h)},u.get=function(c){return this[E.p(c)]()},u.add=function(c,h){var d,g=this;c=Number(c);var y=E.p(h),A=function(N){var C=S(g);return E.w(C.date(C.date()+Math.round(N*c)),g)};if(y===P)return this.set(P,this.$M+c);if(y===I)return this.set(I,this.$y+c);if(y===f)return A(1);if(y===w)return A(7);var $=(d={},d[o]=n,d[l]=r,d[a]=t,d)[y]||1,x=this.$d.getTime()+c*$;return E.w(x,this)},u.subtract=function(c,h){return this.add(-1*c,h)},u.format=function(c){var h=this,d=this.$locale();if(!this.isValid())return d.invalidDate||ze;var g=c||"YYYY-MM-DDTHH:mm:ssZ",y=E.z(this),A=this.$H,$=this.$m,x=this.$M,N=d.weekdays,C=d.months,V=d.meridiem,G=function(R,F,ie,fe){return R&&(R[F]||R(h,g))||ie[F].slice(0,fe)},re=function(R){return E.s(A%12||12,R,"0")},H=V||function(R,F,ie){var fe=R<12?"AM":"PM";return ie?fe.toLowerCase():fe};return g.replace(Ft,function(R,F){return F||function(ie){switch(ie){case"YY":return String(h.$y).slice(-2);case"YYYY":return E.s(h.$y,4,"0");case"M":return x+1;case"MM":return E.s(x+1,2,"0");case"MMM":return G(d.monthsShort,x,C,3);case"MMMM":return G(C,x);case"D":return h.$D;case"DD":return E.s(h.$D,2,"0");case"d":return String(h.$W);case"dd":return G(d.weekdaysMin,h.$W,N,2);case"ddd":return G(d.weekdaysShort,h.$W,N,3);case"dddd":return N[h.$W];case"H":return String(A);case"HH":return E.s(A,2,"0");case"h":return re(1);case"hh":return re(2);case"a":return H(A,$,!0);case"A":return H(A,$,!1);case"m":return String($);case"mm":return E.s($,2,"0");case"s":return String(h.$s);case"ss":return E.s(h.$s,2,"0");case"SSS":return E.s(h.$ms,3,"0");case"Z":return y}return null}(R)||y.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(c,h,d){var g,y=this,A=E.p(h),$=S(c),x=($.utcOffset()-this.utcOffset())*n,N=this-$,C=function(){return E.m(y,$)};switch(A){case I:g=C()/12;break;case P:g=C();break;case B:g=C()/3;break;case w:g=(N-x)/6048e5;break;case f:g=(N-x)/864e5;break;case l:g=N/r;break;case o:g=N/n;break;case a:g=N/t;break;default:g=N}return d?g:E.a(g)},u.daysInMonth=function(){return this.endOf(P).$D},u.$locale=function(){return z[this.$L]},u.locale=function(c,h){if(!c)return this.$L;var d=this.clone(),g=de(c,h,!0);return g&&(d.$L=g),d},u.clone=function(){return E.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},m}(),He=ue.prototype;return S.prototype=He,[["$ms",i],["$s",a],["$m",o],["$H",l],["$W",f],["$M",P],["$y",I],["$D",j]].forEach(function(m){He[m[1]]=function(u){return this.$g(u,m[0],m[1])}}),S.extend=function(m,u){return m.$i||(m(u,ue,S),m.$i=!0),S},S.locale=de,S.isDayjs=Oe,S.unix=function(m){return S(1e3*m)},S.en=z[se],S.Ls=z,S.p={},S})})(Et);var Ht=Et.exports;const v=pt(Ht);var p;(function(s){s[s.AM=0]="AM",s[s.PM=1]="PM"})(p||(p={}));var M;(function(s){s[s.SUNDAY=0]="SUNDAY",s[s.MONDAY=1]="MONDAY",s[s.TUESDAY=2]="TUESDAY",s[s.WEDNESDAY=3]="WEDNESDAY",s[s.THURSDAY=4]="THURSDAY",s[s.FRIDAY=5]="FRIDAY",s[s.SATURDAY=6]="SATURDAY"})(M||(M={}));var b;(function(s){s[s.JANUARY=1]="JANUARY",s[s.FEBRUARY=2]="FEBRUARY",s[s.MARCH=3]="MARCH",s[s.APRIL=4]="APRIL",s[s.MAY=5]="MAY",s[s.JUNE=6]="JUNE",s[s.JULY=7]="JULY",s[s.AUGUST=8]="AUGUST",s[s.SEPTEMBER=9]="SEPTEMBER",s[s.OCTOBER=10]="OCTOBER",s[s.NOVEMBER=11]="NOVEMBER",s[s.DECEMBER=12]="DECEMBER"})(b||(b={}));function jt(s,e){s.assign("day",e.getDate()),s.assign("month",e.getMonth()+1),s.assign("year",e.getFullYear())}function Vt(s,e){s.assign("hour",e.getHours()),s.assign("minute",e.getMinutes()),s.assign("second",e.getSeconds()),s.assign("millisecond",e.getMilliseconds()),s.assign("meridiem",e.getHours()<12?p.AM:p.PM)}function Se(s,e){s.imply("day",e.getDate()),s.imply("month",e.getMonth()+1),s.imply("year",e.getFullYear())}function qt(s,e){s.imply("hour",e.getHours()),s.imply("minute",e.getMinutes()),s.imply("second",e.getSeconds()),s.imply("millisecond",e.getMilliseconds()),s.imply("meridiem",e.getHours()<12?p.AM:p.PM)}const Zt={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:2*60,timezoneOffsetNonDst:60,dstStart:s=>je(s,b.MARCH,M.SUNDAY,2),dstEnd:s=>je(s,b.OCTOBER,M.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-5*60,timezoneOffsetNonDst:-6*60,dstStart:s=>Y(s,b.MARCH,M.SUNDAY,2,2),dstEnd:s=>Y(s,b.NOVEMBER,M.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-4*60,timezoneOffsetNonDst:-5*60,dstStart:s=>Y(s,b.MARCH,M.SUNDAY,2,2),dstEnd:s=>Y(s,b.NOVEMBER,M.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-6*60,timezoneOffsetNonDst:-7*60,dstStart:s=>Y(s,b.MARCH,M.SUNDAY,2,2),dstEnd:s=>Y(s,b.NOVEMBER,M.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-7*60,timezoneOffsetNonDst:-8*60,dstStart:s=>Y(s,b.MARCH,M.SUNDAY,2,2),dstEnd:s=>Y(s,b.NOVEMBER,M.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function Y(s,e,t,n,r=0){let i=0,a=0;for(;a<n;)i++,new Date(s,e-1,i).getDay()===t&&a++;return new Date(s,e-1,i,r)}function je(s,e,t,n=0){const r=t===0?7:t,i=new Date(s,e-1+1,1,12),a=i.getDay()===0?7:i.getDay();let o;return a===r?o=7:a<r?o=7+a-r:o=a-r,i.setDate(i.getDate()-o),new Date(s,e-1,i.getDate(),n)}function At(s,e,t={}){if(s==null)return null;if(typeof s=="number")return s;const n=t[s]??Zt[s];return n==null?null:typeof n=="number"?n:e==null?null:v(e).isAfter(n.dstStart(e.getFullYear()))&&!v(e).isAfter(n.dstEnd(e.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}function Kt(s,e){let t=new Date(s);if(e.y&&(e.year=e.y,delete e.y),e.mo&&(e.month=e.mo,delete e.mo),e.M&&(e.month=e.M,delete e.M),e.w&&(e.week=e.w,delete e.w),e.d&&(e.day=e.d,delete e.d),e.h&&(e.hour=e.h,delete e.h),e.m&&(e.minute=e.m,delete e.m),e.s&&(e.second=e.s,delete e.s),e.ms&&(e.millisecond=e.ms,delete e.ms),"year"in e){const n=Math.floor(e.year);t.setFullYear(t.getFullYear()+n);const r=e.year-n;r>0&&(e.month=(e==null?void 0:e.month)??0,e.month+=r*12)}if("quarter"in e){const n=Math.floor(e.quarter);t.setMonth(t.getMonth()+n*3)}if("month"in e){const n=Math.floor(e.month);t.setMonth(t.getMonth()+n);const r=e.month-n;r>0&&(e.week=(e==null?void 0:e.week)??0,e.week+=r*4)}if("week"in e){const n=Math.floor(e.week);t.setDate(t.getDate()+n*7);const r=e.week-n;r>0&&(e.day=(e==null?void 0:e.day)??0,e.day+=Math.round(r*7))}if("day"in e){const n=Math.floor(e.day);t.setDate(t.getDate()+n);const r=e.day-n;r>0&&(e.hour=(e==null?void 0:e.hour)??0,e.hour+=Math.round(r*24))}if("hour"in e){const n=Math.floor(e.hour);t.setHours(t.getHours()+n);const r=e.hour-n;r>0&&(e.minute=(e==null?void 0:e.minute)??0,e.minute+=Math.round(r*60))}if("minute"in e){const n=Math.floor(e.minute);t.setMinutes(t.getMinutes()+n);const r=e.minute-n;r>0&&(e.second=(e==null?void 0:e.second)??0,e.second+=Math.round(r*60))}if("second"in e){const n=Math.floor(e.second);t.setSeconds(t.getSeconds()+n);const r=e.second-n;r>0&&(e.millisecond=(e==null?void 0:e.millisecond)??0,e.millisecond+=Math.round(r*1e3))}if("millisecond"in e){const n=Math.floor(e.millisecond);t.setMilliseconds(t.getMilliseconds()+n)}return t}function Ue(s){const e={};for(const t in s)e[t]=-s[t];return e}v.extend(Gt);class Fe{constructor(e){T(this,"instant");T(this,"timezoneOffset");e=e??new Date,e instanceof Date?(this.instant=e,this.timezoneOffset=null):(this.instant=e.instant??new Date,this.timezoneOffset=At(e.timezone,this.instant))}getDateWithAdjustedTimezone(){const e=new Date(this.instant);return this.timezoneOffset!==null&&e.setMinutes(e.getMinutes()-this.getSystemTimezoneAdjustmentMinute(this.instant)),e}getSystemTimezoneAdjustmentMinute(e,t){(!e||e.getTime()<0)&&(e=new Date);const n=-e.getTimezoneOffset(),r=t??this.timezoneOffset??n;return n-r}getTimezoneOffset(){return this.timezoneOffset??-this.instant.getTimezoneOffset()}}class D{constructor(e,t){T(this,"knownValues");T(this,"impliedValues");T(this,"reference");T(this,"_tags",new Set);if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(const r in t)this.knownValues[r]=t[r];const n=e.getDateWithAdjustedTimezone();this.imply("day",n.getDate()),this.imply("month",n.getMonth()+1),this.imply("year",n.getFullYear()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){const e=new D(this.reference);e.knownValues={},e.impliedValues={};for(const t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(const t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")&&!this.isCertain("year")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {
            tags: ${JSON.stringify(Array.from(this._tags).sort())}, 
            knownValues: ${JSON.stringify(this.knownValues)}, 
            impliedValues: ${JSON.stringify(this.impliedValues)}}, 
            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return v(this.dateWithoutTimezoneAdjustment())}date(){const e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+t*6e4)}addTag(e){return this._tags.add(e),this}addTags(e){for(const t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){const e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,t){let n=Kt(e.getDateWithAdjustedTimezone(),t);const r=new D(e);return r.addTag("result/relativeDate"),t.hour||t.minute||t.second?(r.addTag("result/relativeDateAndTime"),Vt(r,n),jt(r,n),r.assign("timezoneOffset",e.getTimezoneOffset())):(qt(r,n),r.imply("timezoneOffset",e.getTimezoneOffset()),t.day?(r.assign("day",n.getDate()),r.assign("month",n.getMonth()+1),r.assign("year",n.getFullYear()),r.assign("weekday",n.getDay())):t.week?(r.assign("day",n.getDate()),r.assign("month",n.getMonth()+1),r.assign("year",n.getFullYear()),r.imply("weekday",n.getDay())):(r.imply("day",n.getDate()),t.month?(r.assign("month",n.getMonth()+1),r.assign("year",n.getFullYear())):(r.imply("month",n.getMonth()+1),t.year?r.assign("year",n.getFullYear()):r.imply("year",n.getFullYear())))),r}}class Q{constructor(e,t,n,r,i){T(this,"refDate");T(this,"index");T(this,"text");T(this,"reference");T(this,"start");T(this,"end");this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=r||new D(e),this.end=i}clone(){const e=new Q(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}addTag(e){return this.start.addTag(e),this.end&&this.end.addTag(e),this}addTags(e){return this.start.addTags(e),this.end&&this.end.addTags(e),this}tags(){const e=new Set(this.start.tags());if(this.end)for(const t of this.end.tags())e.add(t);return e}toString(){const e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}}function Dt(s,e,t="\\s{0,5},?\\s{0,5}"){const n=e.replace(/\((?!\?)/g,"(?:");return`${s}${n}(?:${t}${n}){0,10}`}function Jt(s){let e;return s instanceof Array?e=[...s]:s instanceof Map?e=Array.from(s.keys()):e=Object.keys(s),e}function U(s){return`(?:${Jt(s).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}function Mt(s){return s<100&&(s>50?s=s+1900:s=s+2e3),s}function Ee(s,e,t){const n=v(s);let r=n;r=r.month(t-1),r=r.date(e),r=r.year(n.year());const i=r.add(1,"y"),a=r.add(-1,"y");return Math.abs(i.diff(n))<Math.abs(r.diff(n))?r=i:Math.abs(a.diff(n))<Math.abs(r.diff(n))&&(r=a),r.year()}const ke={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},$t={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},W={...$t,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},ve={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},Ce={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},Pt={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},Ae={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...Pt},Ot=`(?:${U(ve)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Xt(s){const e=s.toLowerCase();return ve[e]!==void 0?ve[e]:e==="a"||e==="an"||e=="the"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}const ye=`(?:${U(Ce)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Te(s){let e=s.toLowerCase();return Ce[e]!==void 0?Ce[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}const De="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function Me(s){if(/BE/i.test(s))return s=s.replace(/BE/i,""),parseInt(s)-543;if(/BCE?/i.test(s))return s=s.replace(/BCE?/i,""),-parseInt(s);if(/(AD|CE)/i.test(s))return s=s.replace(/(AD|CE)/i,""),parseInt(s);const e=parseInt(s);return Mt(e)}const St=`(${Ot})\\s{0,3}(${U(Ae)})`,Ve=new RegExp(St,"i"),Qt=`(${Ot})\\s{0,3}(${U(Pt)})`,xt="\\s{0,5},?(?:\\s*and)?\\s{0,5}",le=Dt("(?:(?:about|around)\\s{0,3})?",St,xt),$e=Dt("(?:(?:about|around)\\s{0,3})?",Qt,xt);function ee(s){const e={};let t=s,n=Ve.exec(t);for(;n;)en(e,n),t=t.substring(n[0].length).trim(),n=Ve.exec(t);return Object.keys(e).length==0?null:e}function en(s,e){if(e[0].match(/^[a-zA-Z]+$/))return;const t=Xt(e[1]),n=Ae[e[2].toLowerCase()];s[n]=t}class k{constructor(){T(this,"cachedInnerPattern",null);T(this,"cachedPattern",null)}innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)?this.cachedPattern:(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags),this.cachedPattern)}extract(e,t){const n=t[1]??"";t.index=t.index+n.length,t[0]=t[0].substring(n.length);for(let r=2;r<t.length;r++)t[r-1]=t[r];return this.innerExtract(e,t)}}const tn=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${le})(?=\\W|$)`,"i"),nn=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${le})(?=\\W|$)`,"i"),sn=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${$e})(?=\\W|$)`,"i");class rn extends k{constructor(t){super();T(this,"strictMode");this.strictMode=t}innerPattern(t){return this.strictMode?sn:t.option.forwardDate?tn:nn}innerExtract(t,n){if(n[0].match(/^for\s*the\s*\w+/))return null;const r=ee(n[1]);return r?(t.debug(()=>{console.log(r),console.log(D.createRelativeFromReference(t.reference,r))}),D.createRelativeFromReference(t.reference,r)):null}}const an=new RegExp(`(?:on\\s{0,3})?(${ye})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${ye}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${U(W)})(?:(?:-|/|,?\\s{0,3})(${De}(?!\\w)))?(?=\\W|$)`,"i"),qe=1,Ze=2,on=3,Ke=4;class ln extends k{innerPattern(){return an}innerExtract(e,t){const n=e.createParsingResult(t.index,t[0]),r=W[t[on].toLowerCase()],i=Te(t[qe]);if(i>31)return t.index=t.index+t[qe].length,null;if(n.start.assign("month",r),n.start.assign("day",i),t[Ke]){const a=Me(t[Ke]);n.start.assign("year",a)}else{const a=Ee(e.refDate,i,r);n.start.imply("year",a)}if(t[Ze]){const a=Te(t[Ze]);n.end=n.start.clone(),n.end.assign("day",a)}return n}}const cn=new RegExp(`(${U(W)})(?:-|/|\\s*,?\\s*)(${ye})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${ye})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${De}))?(?=\\W|$)(?!\\:\\d)`,"i"),dn=1,Je=2,xe=3,Ne=4;class un extends k{constructor(t){super();T(this,"shouldSkipYearLikeDate");this.shouldSkipYearLikeDate=t}innerPattern(){return cn}innerExtract(t,n){const r=W[n[dn].toLowerCase()],i=Te(n[Je]);if(i>31||this.shouldSkipYearLikeDate&&!n[xe]&&!n[Ne]&&n[Je].match(/^2[0-5]$/))return null;const a=t.createParsingComponents({day:i,month:r}).addTag("parser/ENMonthNameMiddleEndianParser");if(n[Ne]){const f=Me(n[Ne]);a.assign("year",f)}else{const f=Ee(t.refDate,i,r);a.imply("year",f)}if(!n[xe])return a;const o=Te(n[xe]),l=t.createParsingResult(n.index,n[0]);return l.start=a,l.end=a.clone(),l.end.assign("day",o),l}}const fn=new RegExp(`((?:in)\\s*)?(${U(W)})\\s*(?:(?:,|-|of)?\\s*(${De})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),hn=1,mn=2,Xe=3;class gn extends k{innerPattern(){return fn}innerExtract(e,t){const n=t[mn].toLowerCase();if(t[0].length<=3&&!$t[n])return null;const r=e.createParsingResult(t.index+(t[hn]||"").length,t.index+t[0].length);r.start.imply("day",1),r.start.addTag("parser/ENMonthNameParser");const i=W[n];if(r.start.assign("month",i),t[Xe]){const a=Me(t[Xe]);r.start.assign("year",a)}else{const a=Ee(e.refDate,1,i);r.start.imply("year",a)}return r}}const yn=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${U(W)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Tn=1,pn=2,Qe=3,wn=4;class En extends k{constructor(t){super();T(this,"strictMonthDateOrder");this.strictMonthDateOrder=t}innerPattern(){return yn}innerExtract(t,n){const r=parseInt(n[Tn]);let i=parseInt(n[wn]),a=n[Qe]?parseInt(n[Qe]):W[n[pn].toLowerCase()];if(a<1||a>12){if(this.strictMonthDateOrder)return null;i>=1&&i<=12&&([a,i]=[i,a])}return i<1||i>31?null:{day:i,month:a,year:r}}}const An=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),Dn=1,Mn=2;class $n extends k{innerPattern(){return An}innerExtract(e,t){const n=parseInt(t[Mn]),r=parseInt(t[Dn]);return e.createParsingComponents().imply("day",1).assign("month",r).assign("year",n)}}function Pn(s,e,t,n){return new RegExp(`${s}${e}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function On(s,e){return new RegExp(`^(${s})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}const et=2,q=3,he=4,me=5,ae=6;class Sn{constructor(e=!1){T(this,"strictMode");T(this,"cachedPrimaryPrefix",null);T(this,"cachedPrimarySuffix",null);T(this,"cachedPrimaryTimePattern",null);T(this,"cachedFollowingPhase",null);T(this,"cachedFollowingSuffix",null);T(this,"cachedFollowingTimePatten",null);this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){const n=this.extractPrimaryTimeComponents(e,t);if(!n)return t[0].match(/^\d{4}/)?(t.index+=4,null):(t.index+=t[0].length,null);const r=t.index+t[1].length,i=t[0].substring(t[1].length),a=e.createParsingResult(r,i,n);t.index+=t[0].length;const o=e.text.substring(t.index),f=this.getFollowingTimePatternThroughCache().exec(o);return i.match(/^\d{3,4}/)&&f&&(f[0].match(/^\s*([+-])\s*\d{2,4}$/)||f[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))?null:!f||f[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,f,a),a.end&&(a.text+=f[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){const r=e.createParsingComponents();let i=0,a=null,o=parseInt(t[et]);if(o>100){if(this.strictMode||t[q]!=null)return null;i=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[q]!=null){if(t[q].length==1&&!t[ae])return null;i=parseInt(t[q])}if(i>=60)return null;if(o>12&&(a=p.PM),t[ae]!=null){if(o>12)return null;const l=t[ae][0].toLowerCase();l=="a"&&(a=p.AM,o==12&&(o=0)),l=="p"&&(a=p.PM,o!=12&&(o+=12))}if(r.assign("hour",o),r.assign("minute",i),a!==null?r.assign("meridiem",a):o<12?r.imply("meridiem",p.AM):r.imply("meridiem",p.PM),t[me]!=null){const l=parseInt(t[me].substring(0,3));if(l>=1e3)return null;r.assign("millisecond",l)}if(t[he]!=null){const l=parseInt(t[he]);if(l>=60)return null;r.assign("second",l)}return r}extractFollowingTimeComponents(e,t,n){const r=e.createParsingComponents();if(t[me]!=null){const l=parseInt(t[me].substring(0,3));if(l>=1e3)return null;r.assign("millisecond",l)}if(t[he]!=null){const l=parseInt(t[he]);if(l>=60)return null;r.assign("second",l)}let i=parseInt(t[et]),a=0,o=-1;if(t[q]!=null?a=parseInt(t[q]):i>100&&(a=i%100,i=Math.floor(i/100)),a>=60||i>24)return null;if(i>=12&&(o=p.PM),t[ae]!=null){if(i>12)return null;const l=t[ae][0].toLowerCase();l=="a"&&(o=p.AM,i==12&&(i=0,r.isCertain("day")||r.imply("day",r.get("day")+1))),l=="p"&&(o=p.PM,i!=12&&(i+=12)),n.start.isCertain("meridiem")||(o==p.AM?(n.start.imply("meridiem",p.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",p.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return r.assign("hour",i),r.assign("minute",a),o>=0?r.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>i?r.imply("meridiem",p.AM):i<=12&&(r.assign("hour",i+12),r.assign("meridiem",p.PM)):i>12?r.imply("meridiem",p.PM):i<=12&&r.imply("meridiem",p.AM),r.date().getTime()<n.start.date().getTime()&&r.imply("day",r.get("day")+1),r}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){const n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;const n=t[1],r=t[2];if(r.includes(".")&&!r.match(/\d(\.\d{2})+$/))return null;const i=parseInt(r),a=parseInt(n);if(i>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){const e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=Pn(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){const e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=On(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}}class xn extends Sn{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){const n=super.extractPrimaryTimeComponents(e,t);if(!n)return n;if(t[0].endsWith("night")){const r=n.get("hour");r>=6&&r<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",p.PM)):r<6&&n.assign("meridiem",p.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",p.PM);const r=n.get("hour");r>=0&&r<=6&&n.assign("hour",n.get("hour")+12)}return t[0].endsWith("morning")&&(n.assign("meridiem",p.AM),n.get("hour")<12&&n.assign("hour",n.get("hour"))),n.addTag("parser/ENTimeExpressionParser")}extractFollowingTimeComponents(e,t,n){const r=super.extractFollowingTimeComponents(e,t,n);return r&&r.addTag("parser/ENTimeExpressionParser"),r}}const Nn=new RegExp(`(${le})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),Rn=new RegExp(`(${$e})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i");class kn extends k{constructor(t){super();T(this,"strictMode");this.strictMode=t}innerPattern(){return this.strictMode?Rn:Nn}innerExtract(t,n){const r=ee(n[1]);return r?D.createRelativeFromReference(t.reference,Ue(r)):null}}const vn=new RegExp(`(${le})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Cn=new RegExp(`(${$e})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i"),bn=1;class In extends k{constructor(t){super();T(this,"strictMode");this.strictMode=t}innerPattern(){return this.strictMode?Cn:vn}innerExtract(t,n){const r=ee(n[bn]);return r?D.createRelativeFromReference(t.reference,r):null}}class Nt{refine(e,t){return t.filter(n=>this.isValid(e,n))}}class ce{refine(e,t){if(t.length<2)return t;const n=[];let r=t[0],i=null;for(let a=1;a<t.length;a++){i=t[a];const o=e.text.substring(r.index+r.text.length,i.index);if(!this.shouldMergeResults(o,r,i,e))n.push(r),r=i;else{const l=r,f=i,w=this.mergeResults(o,l,f,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${l} and ${f} into ${w}`)}),r=w}}return r!=null&&n.push(r),n}}class _n extends ce{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(i=>{t.start.isCertain(i)||t.start.imply(i,n.start.get(i))}),t.start.getCertainComponents().forEach(i=>{n.start.isCertain(i)||n.start.imply(i,t.start.get(i))})),t.start.date().getTime()>n.start.date().getTime()){let i=t.start.dayjs(),a=n.start.dayjs();n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(i)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):t.start.isOnlyWeekdayComponent()&&i.add(-7,"days").isBefore(a)?(i=i.add(-7,"days"),t.start.imply("day",i.date()),t.start.imply("month",i.month()+1),t.start.imply("year",i.year())):n.start.isDateWithUnknownYear()&&a.add(1,"years").isAfter(i)?(a=a.add(1,"years"),n.start.imply("year",a.year())):t.start.isDateWithUnknownYear()&&i.add(-1,"years").isBefore(a)?(i=i.add(-1,"years"),t.start.imply("year",i.year())):[n,t]=[t,n]}const r=t.clone();return r.start=t.start,r.end=n.start,r.index=Math.min(t.index,n.index),t.index<n.index?r.text=t.text+e+n.text:r.text=n.text+e+t.text,r}}class Un extends _n{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function Fn(s,e){e=e.add(1,"day"),Rt(s,e),Ye(s,e)}function te(s,e){s.assign("day",e.date()),s.assign("month",e.month()+1),s.assign("year",e.year())}function Yn(s,e){s.assign("hour",e.hour()),s.assign("minute",e.minute()),s.assign("second",e.second()),s.assign("millisecond",e.millisecond()),s.get("hour")<12?s.assign("meridiem",p.AM):s.assign("meridiem",p.PM)}function Rt(s,e){s.imply("day",e.date()),s.imply("month",e.month()+1),s.imply("year",e.year())}function Ye(s,e){s.imply("hour",e.hour()),s.imply("minute",e.minute()),s.imply("second",e.second()),s.imply("millisecond",e.millisecond())}function tt(s,e){const t=s.clone(),n=s.start,r=e.start;if(t.start=nt(n,r),s.end!=null||e.end!=null){const i=s.end==null?s.start:s.end,a=e.end==null?e.start:e.end,o=nt(i,a);if(s.end==null&&o.date().getTime()<t.start.date().getTime()){const l=o.dayjs().add(1,"day");o.isCertain("day")?te(o,l):Rt(o,l)}t.end=o}return t}function nt(s,e){const t=s.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==p.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t.addTags(s.tags()),t.addTags(e.tags()),t}class Wn extends ce{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){const r=t.start.isOnlyDate()?tt(t,n):tt(n,t);return r.index=t.index,r.text=t.text+e+n.text,r}}class st extends Wn{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|∙|:)?\\s*$")}}const Ln=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");class Bn{constructor(e){T(this,"timezoneOverrides");this.timezoneOverrides=e}refine(e,t){const n=e.option.timezones??{};return t.forEach(r=>{const i=e.text.substring(r.index+r.text.length),a=Ln.exec(i);if(!a)return;const o=a[1].toUpperCase(),l=r.start.date()??r.refDate??new Date,f={...this.timezoneOverrides,...n},w=At(o,l,f);if(w==null)return;e.debug(()=>{console.log(`Extracting timezone: '${o}' into: ${w} for: ${r.start}`)});const P=r.start.get("timezoneOffset");P!==null&&w!=P&&(r.start.isCertain("timezoneOffset")||o!=a[1])||r.start.isOnlyDate()&&o!=a[1]||(r.text+=a[0],r.start.isCertain("timezoneOffset")||r.start.assign("timezoneOffset",w),r.end!=null&&!r.end.isCertain("timezoneOffset")&&r.end.assign("timezoneOffset",w))}),t}}const zn=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Gn=1,Hn=2,jn=3;class Vn{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;const r=e.text.substring(n.index+n.text.length),i=zn.exec(r);if(!i)return;e.debug(()=>{console.log(`Extracting timezone: '${i[0]}' into : ${n}`)});const a=parseInt(i[Hn]),o=parseInt(i[jn]||"0");let l=a*60+o;l>14*60||(i[Gn]==="-"&&(l=-l),n.end!=null&&n.end.assign("timezoneOffset",l),n.start.assign("timezoneOffset",l),n.text+=i[0])}),t}}class be{refine(e,t){if(t.length<2)return t;const n=[];let r=t[0];for(let i=1;i<t.length;i++){const a=t[i];if(a.index>=r.index+r.text.length){n.push(r),r=a;continue}let o=null,l=null;a.text.length>r.text.length?(o=a,l=r):(o=r,l=a),e.debug(()=>{console.log(`${this.constructor.name} remove ${l} by ${o}`)}),r=o}return r!=null&&n.push(r),n}}class qn{refine(e,t){return e.option.forwardDate&&t.forEach(n=>{let r=v(e.reference.getDateWithAdjustedTimezone());if(n.start.isOnlyTime()&&e.reference.instant>n.start.date()){const i=e.reference.getDateWithAdjustedTimezone(),a=new Date(i);a.setDate(a.getDate()+1),Se(n.start,a),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} time from the ref date (${i}) to the following day (${a})`)}),n.end&&n.end.isOnlyTime()&&(Se(n.end,a),n.start.date()>n.end.date()&&(a.setDate(a.getDate()+1),Se(n.end,a)))}if(n.start.isOnlyWeekdayComponent()&&r.isAfter(n.start.dayjs())&&(r.day()>=n.start.get("weekday")?r=r.day(n.start.get("weekday")+7):r=r.day(n.start.get("weekday")),n.start.imply("day",r.date()),n.start.imply("month",r.month()+1),n.start.imply("year",r.year()),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} weekday (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(r.day()>n.end.get("weekday")?r=r.day(n.end.get("weekday")+7):r=r.day(n.end.get("weekday")),n.end.imply("day",r.date()),n.end.imply("month",r.month()+1),n.end.imply("year",r.year()),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} weekday (${n.end})`)}))),n.start.isDateWithUnknownYear()&&r.isAfter(n.start.dayjs()))for(let i=0;i<3&&r.isAfter(n.start.dayjs());i++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} year (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${n} month (${n.start})`)}))}),t}}class Zn extends Nt{constructor(t){super();T(this,"strictMode");this.strictMode=t}isValid(t,n){return n.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(t.debug(()=>{console.log(`Removing unlikely result '${n.text}'`)}),!1):n.start.isValidDate()?n.end&&!n.end.isValidDate()?(t.debug(()=>{console.log(`Removing invalid result: ${n} (${n.end})`)}),!1):this.strictMode?this.isStrictModeValid(t,n):!0:(t.debug(()=>{console.log(`Removing invalid result: ${n} (${n.start})`)}),!1)}isStrictModeValid(t,n){return n.start.isOnlyWeekdayComponent()?(t.debug(()=>{console.log(`(Strict) Removing weekday only component: ${n} (${n.end})`)}),!1):!0}}const Kn=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Jn=1,Xn=2,Qn=3,rt=4,es=5,it=6,at=7,ts=8,ot=9,lt=10;class ns extends k{innerPattern(){return Kn}innerExtract(e,t){const n=e.createParsingComponents({year:parseInt(t[Jn]),month:parseInt(t[Xn]),day:parseInt(t[Qn])});if(t[rt]!=null&&(n.assign("hour",parseInt(t[rt])),n.assign("minute",parseInt(t[es])),t[it]!=null&&n.assign("second",parseInt(t[it])),t[at]!=null&&n.assign("millisecond",parseInt(t[at])),t[ts]!=null)){let r=0;if(t[ot]){const i=parseInt(t[ot]);let a=0;t[lt]!=null&&(a=parseInt(t[lt])),r=i*60,r<0?r-=a:r+=a}n.assign("timezoneOffset",r)}return n.addTag("parser/ISOFormatParser")}}class ss extends ce{mergeResults(e,t,n){const r=n.clone();return r.index=t.index,r.text=t.text+e+r.text,r.start.assign("weekday",t.start.get("weekday")),r.end&&r.end.assign("weekday",t.start.get("weekday")),r}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}}function rs(s,e=!1){return s.parsers.unshift(new ns),s.refiners.unshift(new ss),s.refiners.unshift(new Vn),s.refiners.unshift(new be),s.refiners.push(new Bn),s.refiners.push(new be),s.refiners.push(new qn),s.refiners.push(new Zn(e)),s}function is(s){const e=v(s.getDateWithAdjustedTimezone()),t=new D(s,{});return te(t,e),Yn(t,e),t.assign("timezoneOffset",s.getTimezoneOffset()),t.addTag("casualReference/now"),t}function as(s){const e=v(s.getDateWithAdjustedTimezone()),t=new D(s,{});return te(t,e),Ye(t,e),t.addTag("casualReference/today"),t}function os(s){return ls(s).addTag("casualReference/yesterday")}function ls(s,e){return We(s,-1)}function cs(s){return We(s,1).addTag("casualReference/tomorrow")}function We(s,e){let t=v(s.getDateWithAdjustedTimezone());const n=new D(s,{});return t=t.add(e,"day"),te(n,t),Ye(n,t),n}function ds(s,e=22){const t=v(s.getDateWithAdjustedTimezone()),n=new D(s,{});return te(n,t),n.imply("hour",e),n.imply("meridiem",p.PM),n.addTag("casualReference/tonight"),n}function us(s,e=20){const t=new D(s,{});return t.imply("meridiem",p.PM),t.imply("hour",e),t.addTag("casualReference/evening"),t}function fs(s){const e=new D(s,{}),t=v(s.getDateWithAdjustedTimezone());return t.hour()>2&&Fn(e,t),e.assign("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/midnight"),e}function hs(s,e=6){const t=new D(s,{});return t.imply("meridiem",p.AM),t.imply("hour",e),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/morning"),t}function ms(s,e=15){const t=new D(s,{});return t.imply("meridiem",p.PM),t.imply("hour",e),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/afternoon"),t}function gs(s){const e=new D(s,{});return e.imply("meridiem",p.AM),e.assign("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/noon"),e}const ys=/(now|today|tonight|tomorrow|overmorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class Ts extends k{innerPattern(e){return ys}innerExtract(e,t){let n=v(e.refDate);const r=t[0].toLowerCase();let i=e.createParsingComponents();switch(r){case"now":i=is(e.reference);break;case"today":i=as(e.reference);break;case"yesterday":i=os(e.reference);break;case"tomorrow":case"tmr":case"tmrw":i=cs(e.reference);break;case"tonight":i=ds(e.reference);break;case"overmorrow":i=We(e.reference,2);break;default:r.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),te(i,n),i.imply("hour",0));break}return i.addTag("parser/ENCasualDateParser"),i}}const ps=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class ws extends k{innerPattern(){return ps}innerExtract(e,t){let n=null;switch(t[1].toLowerCase()){case"afternoon":n=ms(e.reference);break;case"evening":case"night":n=us(e.reference);break;case"midnight":n=fs(e.reference);break;case"morning":n=hs(e.reference);break;case"noon":case"midday":n=gs(e.reference);break}return n&&n.addTag("parser/ENCasualTimeParser"),n}}function Es(s){const e={};for(const t in s)e[t]=-s[t];return e}function As(s,e){const t=s.clone();let n=s.dayjs();for(const r in e)n=n.add(e[r],r);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}function Ds(s,e,t){const n=s.getDateWithAdjustedTimezone(),r=Ms(n,e,t);let i=new D(s);return i=As(i,{day:r}),i.assign("weekday",e),i}function Ms(s,e,t){const n=s.getDay();switch(t){case"this":return ge(s,e);case"last":return kt(s,e);case"next":return n==M.SUNDAY?e==M.SUNDAY?7:e:n==M.SATURDAY?e==M.SATURDAY?7:e==M.SUNDAY?8:1+e:e<n&&e!=M.SUNDAY?ge(s,e):ge(s,e)+7}return $s(s,e)}function $s(s,e){const t=kt(s,e),n=ge(s,e);return n<-t?n:t}function ge(s,e){const t=s.getDay();let n=e-t;return n<0&&(n+=7),n}function kt(s,e){const t=s.getDay();let n=e-t;return n>=0&&(n-=7),n}const Ps=new RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${U(ke)}|weekend|weekday)(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),Os=1,Ss=2,xs=3;class Ns extends k{innerPattern(){return Ps}innerExtract(e,t){const n=t[Os],r=t[xs];let i=n||r;i=i||"",i=i.toLowerCase();let a=null;i=="last"||i=="past"?a="last":i=="next"?a="next":i=="this"&&(a="this");const o=t[Ss].toLowerCase();let l;if(ke[o]!==void 0)l=ke[o];else if(o=="weekend")l=a=="last"?M.SUNDAY:M.SATURDAY;else if(o=="weekday"){const f=e.reference.getDateWithAdjustedTimezone().getDay();f==M.SUNDAY||f==M.SATURDAY?l=a=="last"?M.FRIDAY:M.MONDAY:(l=f-1,l=a=="last"?l-1:l+1,l=l%5+1)}else return null;return Ds(e.reference,l,a)}}const Rs=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${U(Ae)})(?=\\s*)(?=\\W|$)`,"i"),ks=1,vs=2;class Cs extends k{innerPattern(){return Rs}innerExtract(e,t){const n=t[ks].toLowerCase(),r=t[vs].toLowerCase(),i=Ae[r];if(n=="next"||n.startsWith("after")){const l={};return l[i]=1,D.createRelativeFromReference(e.reference,l)}if(n=="last"||n=="past"){const l={};return l[i]=-1,D.createRelativeFromReference(e.reference,l)}const a=e.createParsingComponents();let o=v(e.reference.instant);return r.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):r.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):r.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}}const bs=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Is=1,_s=5,ct=2,dt=3,Re=4;class Us{constructor(e){T(this,"groupNumberMonth");T(this,"groupNumberDay");this.groupNumberMonth=e?dt:ct,this.groupNumberDay=e?ct:dt}pattern(){return bs}extract(e,t){const n=t.index+t[Is].length,r=t.index+t[0].length-t[_s].length;if(n>0&&e.text.substring(0,n).match("\\d/?$")||r<e.text.length&&e.text.substring(r).match("^/?\\d"))return;const i=e.text.substring(n,r);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Re]&&i.indexOf("/")<0)return;const a=e.createParsingResult(n,i);let o=parseInt(t[this.groupNumberMonth]),l=parseInt(t[this.groupNumberDay]);if((o<1||o>12)&&o>12)if(l>=1&&l<=12&&o<=31)[l,o]=[o,l];else return null;if(l<1||l>31)return null;if(a.start.assign("day",l),a.start.assign("month",o),t[Re]){const f=parseInt(t[Re]),w=Mt(f);a.start.assign("year",w)}else{const f=Ee(e.refDate,l,o);a.start.imply("year",f)}return a.addTag("parser/SlashDateFormatParser")}}const Fs=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${le})(?=\\W|$)`,"i"),Ys=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${$e})(?=\\W|$)`,"i");class Ws extends k{constructor(t=!0){super();T(this,"allowAbbreviations");this.allowAbbreviations=t}innerPattern(){return this.allowAbbreviations?Fs:Ys}innerExtract(t,n){const r=n[1].toLowerCase();let i=ee(n[2]);if(!i)return null;switch(r){case"last":case"past":case"-":i=Ue(i);break}return D.createRelativeFromReference(t.reference,i)}}function Ls(s){return s.text.match(/^[+-]/i)!=null}function ut(s){return s.text.match(/^-/i)!=null}class Bs extends ce{shouldMergeResults(e,t,n){return e.match(/^\s*$/i)?Ls(n)||ut(n):!1}mergeResults(e,t,n,r){let i=ee(n.text);ut(n)&&(i=Es(i));const a=D.createRelativeFromReference(new Fe(t.start.date()),i);return new Q(t.reference,t.index,`${t.text}${e}${n.text}`,a)}}function ft(s){return s.text.match(/\s+(before|from)$/i)!=null}function zs(s){return s.text.match(/\s+(after|since)$/i)!=null}class Gs extends ce{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!ft(t)&&!zs(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let r=ee(t.text);ft(t)&&(r=Ue(r));const i=D.createRelativeFromReference(new Fe(n.start.date()),r);return new Q(n.reference,t.index,`${t.text}${e}${n.text}`,i)}}const Hs=new RegExp(`^\\s*(${De})`,"i"),js=1;class Vs{refine(e,t){return t.forEach(function(n){if(!n.start.isDateWithUnknownYear())return;const r=e.text.substring(n.index+n.text.length),i=Hs.exec(r);if(!i||i[0].trim().length<=3)return;e.debug(()=>{console.log(`Extracting year: '${i[0]}' into : ${n}`)});const a=Me(i[js]);n.end!=null&&n.end.assign("year",a),n.start.assign("year",a),n.text+=i[0]}),t}}class qs extends Nt{constructor(){super()}isValid(e,t){const n=t.text.trim();return n===e.text.trim()?!0:n.toLowerCase()==="may"&&!e.text.substring(0,t.index).trim().match(/\b(in)$/i)?(e.debug(()=>{console.log(`Removing unlikely result: ${t}`)}),!1):n.toLowerCase().endsWith("the second")?(e.text.substring(t.index+t.text.length).trim().length>0&&e.debug(()=>{console.log(`Removing unlikely result: ${t}`)}),!1):!0}}class vt{createCasualConfiguration(e=!1){const t=this.createConfiguration(!1,e);return t.parsers.push(new Ts),t.parsers.push(new ws),t.parsers.push(new gn),t.parsers.push(new Cs),t.parsers.push(new Ws),t.refiners.push(new qs),t}createConfiguration(e=!0,t=!1){const n=rs({parsers:[new Us(t),new rn(e),new ln,new un(t),new Ns,new $n,new xn(e),new kn(e),new In(e)],refiners:[new st]},e);return n.parsers.unshift(new En(e)),n.refiners.unshift(new Gs),n.refiners.unshift(new Bs),n.refiners.unshift(new be),n.refiners.push(new st),n.refiners.push(new Vs),n.refiners.push(new Un),n}}class X{constructor(e){T(this,"parsers");T(this,"refiners");T(this,"defaultConfig",new vt);e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new X({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){const r=this.parse(e,t,n);return r.length>0?r[0].start.date():null}parse(e,t,n){const r=new Zs(e,t,n);let i=[];return this.parsers.forEach(a=>{const o=X.executeParser(r,a);i=i.concat(o)}),i.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){i=a.refine(r,i)}),i}static executeParser(e,t){const n=[],r=t.pattern(e),i=e.text;let a=e.text,o=r.exec(a);for(;o;){const l=o.index+i.length-a.length;o.index=l;const f=t.extract(e,o);if(!f){a=i.substring(o.index+1),o=r.exec(a);continue}let w=null;f instanceof Q?w=f:f instanceof D?(w=e.createParsingResult(o.index,o[0]),w.start=f):w=e.createParsingResult(o.index,o[0],f);const P=w.index,B=w.text;e.debug(()=>console.log(`${t.constructor.name} extracted (at index=${P}) '${B}'`)),n.push(w),a=i.substring(P+B.length),o=r.exec(a)}return n}}class Zs{constructor(e,t,n){T(this,"text");T(this,"option");T(this,"reference");T(this,"refDate");this.text=e,this.reference=new Fe(t),this.option=n??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof D?e:new D(this.reference,e)}createParsingResult(e,t,n,r){const i=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=r?this.createParsingComponents(r):null;return new Q(this.reference,e,i,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}}const Le=new vt,Ks=new X(Le.createCasualConfiguration(!1));new X(Le.createConfiguration(!0,!1));new X(Le.createCasualConfiguration(!0));const Js=Ks;function Xs(s,e,t){return Js.parse(s,e,t)}const pe=document.getElementById("task-input"),Qs=document.getElementById("category-select"),er=document.getElementById("priority-select"),tr=document.getElementById("add-task"),nr=document.getElementById("tasks-list"),ht=document.querySelectorAll(".filter-btn"),Ct=document.getElementById("theme-toggle"),sr=document.getElementById("datetime"),Z=document.getElementById("voice-input");let _=null;"webkitSpeechRecognition"in window?(_=new window.webkitSpeechRecognition,_.continuous=!1,_.interimResults=!1,_.lang="en-US",_.onstart=()=>{Z.classList.add("listening")},_.onend=()=>{Z.classList.remove("listening")},_.onresult=s=>{const e=s.results[0][0].transcript;pe.value=e,Be()},_.onerror=s=>{console.error("Speech recognition error:",s.error),Z.classList.remove("listening")},Z.addEventListener("click",()=>{Z.classList.contains("listening")?_.stop():_.start()})):(Z.style.display="none",console.log("Speech recognition not supported in this browser"));function bt(){const s=new Date,e={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};sr.textContent=s.toLocaleDateString("en-US",e)}setInterval(bt,1e3);bt();let O=JSON.parse(localStorage.getItem("tasks"))||[],Ie="all",_e=localStorage.getItem("theme")==="dark";function It(){const s=document.body.classList.contains("dark-mode");Ct.innerHTML=s?'<i class="fas fa-sun"></i>':'<i class="fas fa-moon"></i>'}document.body.classList.toggle("dark-mode",_e);It();Ct.addEventListener("click",rr);function rr(){document.body.classList.toggle("dark-mode"),_e=document.body.classList.contains("dark-mode"),localStorage.setItem("theme",_e?"dark":"light"),It()}tr.addEventListener("click",Be);pe.addEventListener("keypress",s=>{s.key==="Enter"&&Be()});ht.forEach(s=>{s.addEventListener("click",()=>{ht.forEach(e=>e.classList.remove("active")),s.classList.add("active"),Ie=s.dataset.filter,L()})});document.querySelectorAll(".check-all").forEach(s=>{s.addEventListener("click",()=>{const e=s.dataset.category;cr(e)})});document.querySelectorAll(".delete-all").forEach(s=>{s.addEventListener("click",()=>{const e=s.dataset.category;dr(e)})});const K=document.getElementById("edit-modal"),J=document.getElementById("confirm-modal"),mt=document.getElementById("edit-task-input"),gt=document.getElementById("edit-category-select"),yt=document.getElementById("edit-priority-select"),ir=document.getElementById("confirm-message");function _t(s){s.classList.add("show"),document.body.style.overflow="hidden"}function we(s){s.classList.remove("show"),document.body.style.overflow=""}function oe(s,e){ir.textContent=s,_t(J);const t=J.querySelector(".confirm-btn"),n=J.querySelector(".cancel-btn"),r=J.querySelector(".close-modal"),i=()=>{e(),we(J),o()},a=()=>{we(J),o()},o=()=>{t.removeEventListener("click",i),n.removeEventListener("click",a),r.removeEventListener("click",a)};t.addEventListener("click",i),n.addEventListener("click",a),r.addEventListener("click",a)}function Be(){const s=pe.value.trim();if(!s)return;let e=null,t=s;try{const r=Xs(s);if(r&&r.length>0&&r[0].start){e=r[0].start.date();const{index:i,text:a}=r[0];t=(s.slice(0,i)+s.slice(i+a.length)).trim(),t||(t=s)}}catch(r){console.warn("Chrono parse error:",r),e=null}const n={id:Date.now(),text:t,category:Qs.value,priority:er.value,completed:!1,createdAt:new Date,dueDate:e||null};O.unshift(n),ne(),L(),pe.value=""}function ar(s){oe("Are you sure you want to delete this task?",()=>{O.splice(s,1),ne(),L()})}function or(s){O=O.map(e=>e.id===s?{...e,completed:!e.completed}:e),ne(),L()}function lr(s){const e=O[s];mt.value=e.text,gt.value=e.category,yt.value=e.priority,_t(K);const t=K.querySelector(".save-btn"),n=K.querySelector(".cancel-btn"),r=K.querySelector(".close-modal"),i=()=>{const l=mt.value.trim();l&&(O[s].text=l,O[s].category=gt.value,O[s].priority=yt.value,ne(),L(),we(K)),o()},a=()=>{we(K),o()},o=()=>{t.removeEventListener("click",i),n.removeEventListener("click",a),r.removeEventListener("click",a)};t.addEventListener("click",i),n.addEventListener("click",a),r.addEventListener("click",a)}function L(){const s=Ie==="all"?O:O.filter(e=>e.category===Ie);nr.innerHTML=s.map(e=>{let t="";if(e.dueDate){const n=new Date(e.dueDate);if(!isNaN(n.getTime())){const r=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0"),a=n.getFullYear();t=`<span class="due-date">Due: ${i}/${r}/${a}</span>`}}return`
        <div class="task-item ${e.completed?"completed":""}" data-task-id="${e.id}">
            <div class="task-content">
                <input type="checkbox" 
                       class="task-checkbox" 
                       ${e.completed?"checked":""}>
                <span class="task-text">${e.text}</span>
                ${t}
                <span class="task-category">${e.category}</span>
                <span class="task-priority priority-${e.priority}">${e.priority}</span>
            </div>
            <div class="task-actions">
                <button class="edit-btn" title="Edit"><i class="fas fa-edit"></i></button>
                <button class="delete-btn" title="Delete"><i class="fas fa-trash"></i></button>
            </div>
        </div>
        `}).join(""),document.querySelectorAll(".task-item").forEach(e=>{const t=Number(e.getAttribute("data-task-id"));e.querySelector(".task-checkbox").addEventListener("change",()=>{or(t)}),e.querySelector(".edit-btn").addEventListener("click",()=>{const n=O.findIndex(r=>r.id===t);lr(n)}),e.querySelector(".delete-btn").addEventListener("click",()=>{const n=O.findIndex(r=>r.id===t);ar(n)})})}function ne(){localStorage.setItem("tasks",JSON.stringify(O))}function cr(s){const e=s==="all"?O:O.filter(t=>t.category===s);if(e.length===0){oe("No tasks found in this category.",()=>{});return}oe(`Are you sure you want to mark all ${s} tasks as complete?`,()=>{e.forEach(t=>{t.completed=!0}),ne(),L()})}function dr(s){if((s==="all"?O:O.filter(t=>t.category===s)).length===0){oe("No tasks found in this category.",()=>{});return}oe(`Are you sure you want to delete all ${s} tasks?`,()=>{s==="all"?O.length=0:O=O.filter(t=>t.category!==s),ne(),L()})}L();
